var execCmd = require('./execCmd');
var chalk = require('chalk');
module.exports = function (dir, branch, cb) {
	// add to git index, prepare to commit
	execCmd(['git', 'add', '.'], {cwd: dir}, function() {
		// commit and push
		execCmd(['git', 'commit', '-a', '-m', '"misc: auto commit"'], {cwd: dir}, function(status2){
			// 0: something updated
			// 1: nothing to commit
			// console.log(chalk.gray('git commit status: ' + status2));
			execCmd(['git', 'push', '-u', 'origin', branch + ':' + branch], {cwd: dir}, cb);
		});
	});
	
}
